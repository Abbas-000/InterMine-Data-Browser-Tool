function formatAsConstraintForFilter(i){for(var n=[[],[]],t="ABCDEFGHIJKLMNOPRQSTUVWXYZ".split(""),e=0;e<i.length;e++)n[0].push({path:"organism.shortName",op:"=",value:i[e].innerHTML.split("(")[0].trim(),code:t[e]}),n[1].push(t[e]);return 1<n[1].length?n[1]=n[1].join(" or "):n[1]=n[1].join(""),n}function createSidebarEvents(){$("#organismshortnamelist li").click(function(){$(this).hasClass("checked")?$(this).removeClass("checked"):$(this).addClass("checked"),window.imTable.query.addConstraint({path:"organism.shortName",op:"==",value:$(".checked a p").toArray()[0].innerHTML})}),$("#btnDatasetViewMore").click(function(){window.showingMoreDatasets||(window.showingMoreDatasets=!0,showMoreDatasetNames(),$("#btnDatasetViewMore").remove())}),$("#locationSearchButton").click(function(){window.locationFilter&&clearLocationConstraint();var i=$("#locationChromosomeSearchInput").val(),n=$("#locationStartSearchInput").val(),t=$("#locationEndSearchInput").val();i||(0==$("#locationFilterAlert").length?($("#navbarResponsive").prepend("<div class='alert' id='locationFilterAlert'><span class='closebtn' id='closeLocationFilterAlert'>×</span>Please, specify a chromosome in the filter input field.</div><br/>"),$("#closeLocationFilterAlert").click(function(){$("#locationFilterAlert").hide()})):$("#locationFilterAlert").show()),$.isNumeric(n)&&$.isNumeric(t)?parseInt(n)>parseInt(t)?0==$("#locationFilterAlert").length?($("#navbarResponsive").prepend("<div class='alert' id='locationFilterAlert'><span class='closebtn' id='closeLocationFilterAlert'>×</span>The location start position must be less or equal to the end position.</div><br/>"),$("#closeLocationFilterAlert").click(function(){$("#locationFilterAlert").hide()})):$("#locationFilterAlert").show():(window.locationFilter=[],window.imTable.query.addConstraint({path:"locations.start",op:">=",value:n}),window.locationFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1]),window.imTable.query.addConstraint({path:"locations.end",op:"<=",value:t}),window.locationFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1]),window.imTable.query.addConstraint({path:"locations.locatedOn.primaryIdentifier",op:"==",value:i}),window.locationFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])):0==$("#locationFilterAlert").length?($("#navbarResponsive").prepend("<div class='alert' id='locationFilterAlert'><span class='closebtn' id='closeLocationFilterAlert'>×</span>Please, write a integer number in both the 'Start' and 'End' input fields.</div><br/>"),$("#closeLocationFilterAlert").click(function(){$("#locationFilterAlert").hide()})):$("#locationFilterAlert").show()}),$("#locationResetButton").click(function(){window.locationFilter&&clearLocationConstraint(),$("#locationStartSearchInput").val(""),$("#locationEndSearchInput").val(""),$("#locationChromosomeSearchInput").val("")}),$("#interactionsSearchButton").click(function(){window.interactionsFilter&&clearInteractionsConstraint();var i=$("#interactionsParticipant2SearchInput").val(),n=$("#interactionsTypeSelector").val(),t=$("#interactionsDatasetSelector").val();window.interactionsFilter=[],i&&(window.imTable.query.addConstraint({path:"interactions.participant2.symbol",op:"==",value:i}),window.interactionsFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),"All"!=n&&(window.imTable.query.addConstraint({path:"interactions.details.type",op:"==",value:n}),window.interactionsFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),"All"!=t&&(window.imTable.query.addConstraint({path:"interactions.details.dataSets.name",op:"==",value:t}),window.interactionsFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1]))}),$("#interactionsResetButton").click(function(){window.interactionsFilter&&clearInteractionsConstraint(),$("#interactionsParticipant2SearchInput").val("")}),$("#clinvarSearchButton").click(function(){window.clinVarFilter&&clearClinVarConstraint();var i=$("#clinvarClinicalSignificanceSearchInput").val(),n=$("#clinvarTypeSearchInput").val();i&&n?(window.clinVarFilter=[],window.imTable.query.addConstraint({path:"alleles.clinicalSignificance",op:"==",value:i}),window.clinVarFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1]),window.imTable.query.addConstraint({path:"alleles.type",op:"==",value:n}),window.clinVarFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])):0==$("#clinvarFilterAlert").length?($("#navbarResponsive").prepend("<div class='alert' id='clinvarFilterAlert'><span class='closebtn' id='closeClinVarFilterAlert'>×</span>Please, specify a clinical significante and type in the filter input field.</div><br/>"),$("#closeClinVarFilterAlert").click(function(){$("#clinvarFilterAlert").hide()})):$("#clinvarFilterAlert").show()}),$("#clinvarResetButton").click(function(){window.clinVarFilter&&clearClinVarConstraint(),$("#clinvarClinicalSignificanceSearchInput").val(""),$("#clinvarTypeSearchInput").val("")}),$("#expressionSearchButton").click(function(){window.expressionFilter&&clearExpressionFilterConstraint();var i=$("#expressionPvalueSearchInput").val(),n=$("#expressionTstatisticSearchInput").val(),t=$("#expressionExpressionSelector").val(),e=$("#expressionDatasetSelector").val();window.expressionFilter=[],i&&(window.imTable.query.addConstraint({path:"atlasExpression.pValue",op:">=",value:i}),window.expressionFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),n&&(window.imTable.query.addConstraint({path:"atlasExpression.tStatistic",op:">=",value:n}),window.expressionFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),window.imTable.query.addConstraint({path:"atlasExpression.expression",op:"==",value:t}),window.expressionFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1]),"All"!=e&&(window.imTable.query.addConstraint({path:"atlasExpression.dataSets.name",op:"==",value:e}),window.expressionFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1]))}),$("#expressionResetButton").click(function(){window.expressionFilter&&clearExpressionFilterConstraint(),$("#expressionTstatisticSearchInput").val(""),$("#expressionPvalueSearchInput").val("")})}function clearExpressionFilterConstraint(){for(var i=0;i<window.expressionFilter.length;i++)window.imTable.query.removeConstraint(window.expressionFilter[i]);window.expressionFilter=null}function clearLocationConstraint(){for(var i=0;i<window.locationFilter.length;i++)window.imTable.query.removeConstraint(window.locationFilter[i]);window.locationFilter=null}function clearInteractionsConstraint(){for(var i=0;i<window.interactionsFilter.length;i++)window.imTable.query.removeConstraint(window.interactionsFilter[i]);window.interactionsFilter=null}function clearClinVarConstraint(){for(var i=0;i<window.clinVarFilter.length;i++)window.imTable.query.removeConstraint(window.clinVarFilter[i]);window.clinVarFilter=null}function addDatasetConstraint(i){window.imTable.query.addConstraint({path:"dataSets.name",op:"==",value:i,code:i.replace(/ /g,"")}),console.log(window.imTable)}