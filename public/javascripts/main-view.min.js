function handleCurrentClassFilter(n){$("#sidebarUl").prepend('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="'+n+'" id="'+n+'FilterLi"><a class="nav-link" data-toggle="collapse" href="#'+n+'SearchCardBlock" aria-controls="'+n+'SearchCardBlock" style="color:black;"><i class="fa fa-fw fa-eye"></i><span class="nav-link-text"></span>'+n+'</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="'+n+'SearchCardBlock" style="overflow: auto;"><div class="ul list-group list-group-flush" id="'+n+'FilterList"></div><form-group class="ui-front"><input class="form-control" type="text" id="'+n+'SearchInput" placeholder="Search input..."/><select class="form-control" id="'+n+'SearchTypeSelector" style="width: 100%;"><option value="LOOKUP">LOOKUP identifier(s)</option><option value="IN">IN list</option><option value="NOTIN">NOT IN list</option></select><button class="btn btn-success" type="button" style="width:100%;" id="'+n+'SearchButton">Go!</button><button class="btn btn-secondary" type="button" style="width:100%;" id="'+n+'ResetButton">Reset</button></form-group></div></div></li>'),$("#"+n+"SearchButton").click(function(){window.currentClassViewFilter&&clearCurrentClassViewConstraint();var t=$("#"+n+"SearchInput").val(),e=$("#"+n+"SearchTypeSelector").val();window.currentClassViewFilter=[],t&&("LOOKUP"===e&&(window.imTable.query.addConstraint({path:n,op:"LOOKUP",value:t,extraValue:""}),window.currentClassViewFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),"IN"===e&&(window.imTable.query.addConstraint({path:n,op:"IN",value:t}),window.currentClassViewFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),"NOTIN"===e&&(window.imTable.query.addConstraint({path:n,op:"NOT IN",value:t}),window.currentClassViewFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])))}),$("#"+n+"ResetButton").click(function(){window.currentClassViewFilter&&clearCurrentClassViewConstraint(),$("#"+n+"SearchInput").val("")})}function initializeViewButtons(){for(var o=sessionStorage.getItem("currentClassView"),s=["Gene","Protein"],t=0;t<s.length;t++)o===s[t]?$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+s[t]+' view"><button class="btn btn-primary btn-space" id="'+s[t]+'Button" type="button">'+s[t]+"</button></a>"):$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+s[t]+' view"><button class="btn btn-default btn-space" id="'+s[t]+'Button" type="button">'+s[t]+"</button></a>"),$("#"+s[t]+"Button").click(function(t){sessionStorage.setItem("currentClassView",String(this.id).split("Button")[0]),location.reload()});var e=escapeMineURL(window.mineUrl);"/"!=e.slice(-1)&&(e+="/"),e+="model?format=json",$.when(getMineModel(e)).done(function(t){var e=JSON.parse(JSON.stringify(t.model.classes)),n=[];for(var a in e)n.push(e[a]);for(var i=0;i<n.length;i++)n[i].tags.includes("im:preferredBagType")&&!s.includes(n[i].name)&&(o===n[i].name?$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+n[i].name+' view"><button class="btn btn-primary btn-space" id="'+n[i].name+'Button" type="button">'+n[i].name+"</button></a>"):$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+n[i].name+' view"><button class="btn btn-default btn-space" id="'+n[i].name+'Button" type="button">'+n[i].name+"</button></a>"),$("#"+n[i].name+"Button").click(function(t){sessionStorage.setItem("currentClassView",String(this.id).split("Button")[0]),location.reload()}))}),localStorage.getItem("view-manager")||localStorage.setItem("view-manager","[]");var n=JSON.parse(localStorage.getItem("view-manager"));if(findElementJSONarray(n,"mine",window.selectedMineName)){var a=findElementJSONarray(n,"mine",window.selectedMineName);if(a.viewNames){var i=a.viewNames.split(",");for(t=0;t<i.length;t++)o===i[t]?$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+i[t]+' view"><button class="btn btn-primary btn-space" id="'+i[t]+'Button" type="button">'+i[t]+"</button></a>"):$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+i[t]+' view"><button class="btn btn-default btn-space" id="'+i[t]+'Button" type="button">'+i[t]+"</button></a>"),$("#"+i[t]+"Button").click(function(t){sessionStorage.setItem("currentClassView",String(this.id).split("Button")[0]),location.reload()})}}}function handleResponsiveness(){var e=$(window).width();if(e<992){var t=$("#navbarResponsive").height();e<770?$("body.fixed-nav").css("padding-top",t+75):$("body.fixed-nav").css("padding-top",t+56)}else $("body.fixed-nav").css("padding-top","56px");$(window).on("resize",function(){if($(this).width()!=e)if((e=$(this).width())<992){var t=$("#navbarResponsive").height();e<770?$("body.fixed-nav").css("padding-top",t+75):$("body.fixed-nav").css("padding-top",t+56)}else $("body.fixed-nav").css("padding-top","56px")})}function clearCurrentClassViewConstraint(){for(var t=0;t<window.currentClassViewFilter.length;t++)try{window.imTable.query.removeConstraint(window.currentClassViewFilter[t])}catch(t){continue}window.currentClassViewFilter=null}function checkForHTTPS(){window.location.protocol.includes("https")&&$("#navbarResponsive").prepend("<div class='alert' id='httpsAlert'>You are currently viewing the HTTPS website. Due to security limitations, we are unable to show results from HTTP-only InterMines. You may be able to see more results if you <a href='http://im-browser-prototype.herokuapp.com/'>reload this site</a> via HTTP, and/or allow unsafe scripts to run.</div><br/>")}$(document).ready(function(){sessionStorage.getItem("currentClassView")||sessionStorage.setItem("currentClassView","Gene");var t=sessionStorage.getItem("currentClassView");checkForHTTPS(),initializeViewButtons(),handleResponsiveness(),handleCurrentClassFilter(t),window.tableConstraintLogic="(A OR B OR C OR D OR E OR F OR G OR H OR I OR J) AND (K) AND (L) AND (M) AND (N) AND (O) AND (P) AND (Q) AND (R) AND (O AND S) AND (T AND U AND V) AND (W AND X AND Y AND Z)",document.title=t+" in HumanMine",$("#proteinsButton").removeClass("btn-primary").addClass("btn-default"),$("#genesButton").removeClass("btn-default").addClass("btn-primary");var e=window.mineUrl.replace(/COLON/g,":").replace(/SLASH/g,"/");["Gene","Protein"].includes(t)||$("#graphsBoxBody").hide();var n={root:e,token:getSessionToken()},a={constraintLogic:window.tableConstraintLogic,select:["*"],from:t};imtables.configure({TableCell:{PreviewTrigger:"click"}}),imtables.configure("TableResults.CacheFactor",20);imtables.loadDash("#dataTable",{start:0,size:25},{service:n,query:a}).then(function(e){e.children.table.on("rendered",function(t){document.title=sessionStorage.getItem("currentClassView")+" in "+window.selectedMineName,updateElements(e.history.currentQuery.constraints,"PieChart"),updateGeneLengthChart(e.history.currentQuery.constraints,"GeneLengthChart")}),window.imTable=e.children.table},function(t){console.error("Could not load table",t)})});